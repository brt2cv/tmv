# 关于OCR工具的软件包的授权机制

现在大部分需求是用于客户演示，所以对于OCR的软件包提供以下授权方式：

1. 软件在非授权状态下可以开启，但使用时长仅限10min，超时后自动关闭；
2. 授权方式：
    1. 在线授权
    通过网络向服务器（122.51.162.231）发送注册码，服务器下发证书。
    2. 离线授权
    导入授权秘钥（证书）。

3. 授权策略：
    1. 非授权状态限制使用时长，但不限制软件启动次数。
    2. 用户购买注册码，注册码包含使用年限的设定；
    3. 用户在正式机器上发送注册码，获取授权秘钥（证书）。
    4. 授权证书会识别特定的机器ID（包括对硬盘、网卡等多个物理硬件的MD5）和使用年限，当运行在非法机器或时间过期时，限制软件使用。

4. 软件实现：
    1. 出厂设定默认"license_version"（一个唯一的版本ID，例如：["triage", "v1.0"]，对应授权服务器的dict），主动尝试网络授权。
    1. 若授权失败：
        1. 网络无法连接，需要手动导入证书：
            * 生成请求码（机器码），需要手动发送给管理员，通过授权狗生成证书。
            * 将证书的文本填入授权对话框，或直接将证书拷贝到授权目录。

        1. 默认授权已过期：
            * 更新软件的"license_version"（由管理员指定，操作者在对话框中填入）

    1. 为避免用户直接填入更长久的"license_version"，服务端验证的license为"默认license+可变"组合项。这样可以防止用A项目的授权填入B项目以获得更长的使用周期。
